<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ZEE5: Login</title>
    <link rel="stylesheet" href="./components/navbar.css" />
    <link rel="stylesheet" href="./components/footer.css" />
    <link rel="stylesheet" href="./login.css" />
  </head>
  <body>
    <div id="sh_navbar"></div>
    <div id="sh_result"></div>

    <div id="sh_container">
      <div id="sh_main">
        <h4><a href="./index.html">X</a></h4>
        <h3>Login to ZEE5</h3>
        <p>
          Login to continue enjoying uninterrupted video and personalised
          experience.
        </p>
        <span
          ><button>
            <a
              href="https://appleid.apple.com/auth/authorize?client_id=com.zee5.pwa&redirect_uri=https%3A%2F%2Fwww.zee5.com&response_type=code%20id_token&state=origin%3Aweb&scope=name%20email&response_mode=web_message&frame_id=63ee945f-8079-4055-8229-c56cce12a435&m=11&v=1.5.4"
              ><img
                src="https://www.zee5.com/images/apple-social-icon-circle.svg?ver=2.51.89"
                alt=""
            /></a>

            <a
              href="https://accounts.google.com/o/oauth2/auth/oauthchooseaccount?redirect_uri=storagerelay%3A%2F%2Fhttps%2Fwww.zee5.com%3Fid%3Dauth434459&response_type=permission%20id_token&scope=email%20profile%20openid&openid.realm&include_granted_scopes=true&client_id=171585693881-93jei1bqpoaejkq5ha63iemuq8bbmoar.apps.googleusercontent.com&ss_domain=https%3A%2F%2Fwww.zee5.com&fetch_basic_profile=true&gsiwebsdk=2&flowName=GeneralOAuthFlow"
              target="_blank"
            >
              <img
                src="https://www.zee5.com/images/google-social-icon-circle.svg?ver=2.51.89"
                alt=""
            /></a>
            <a
              href="https://www.facebook.com/login.php?skip_api_login=1&api_key=771609066382248&kid_directed_site=0&app_id=771609066382248&signed_next=1&next=https%3A%2F%2Fwww.facebook.com%2Fv2.10%2Fdialog%2Foauth%3Fapp_id%3D771609066382248%26cbt%3D1661508374072%26channel_url%3Dhttps%253A%252F%252Fstaticxx.facebook.com%252Fx%252Fconnect%252Fxd_arbiter%252F%253Fversion%253D46%2523cb%253Df2e3d1c38ff7a88%2526domain%253Dwww.zee5.com%2526is_canvas%253Dfalse%2526origin%253Dhttps%25253A%25252F%25252Fwww.zee5.com%25252Ff26b75284de00e8%2526relation%253Dopener%26client_id%3D771609066382248%26display%3Dpopup%26domain%3Dwww.zee5.com%26e2e%3D%257B%257D%26fallback_redirect_uri%3Dhttps%253A%252F%252Fwww.zee5.com%252Fsignin%26locale%3Den_US%26logger_id%3Dff259b10e485e%26origin%3D1%26redirect_uri%3Dhttps%253A%252F%252Fstaticxx.facebook.com%252Fx%252Fconnect%252Fxd_arbiter%252F%253Fversion%253D46%2523cb%253Df1aefbdad6976d%2526domain%253Dwww.zee5.com%2526is_canvas%253Dfalse%2526origin%253Dhttps%25253A%25252F%25252Fwww.zee5.com%25252Ff26b75284de00e8%2526relation%253Dopener%2526frame%253Df42941b15fa488%26response_type%3Dtoken%252Csigned_request%252Cgraph_domain%26sdk%3Djoey%26version%3Dv2.10%26ret%3Dlogin%26fbapp_pres%3D0%26tp%3Dunspecified&cancel_url=https%3A%2F%2Fstaticxx.facebook.com%2Fx%2Fconnect%2Fxd_arbiter%2F%3Fversion%3D46%23cb%3Df1aefbdad6976d%26domain%3Dwww.zee5.com%26is_canvas%3Dfalse%26origin%3Dhttps%253A%252F%252Fwww.zee5.com%252Ff26b75284de00e8%26relation%3Dopener%26frame%3Df42941b15fa488%26error%3Daccess_denied%26error_code%3D200%26error_description%3DPermissions%2Berror%26error_reason%3Duser_denied&display=popup&locale=en_GB&pl_dbl=0"
              ><img
                src="https://www.zee5.com/images/fb-social-icon-circle.svg?ver=2.51.89"
                alt=""
            /></a>
            <a
              href="https://api.twitter.com/oauth/authenticate?oauth_token=Hb94YQAAAAAA2CPSAAABgtmekLw&force_login=false"
              ><img
                src="https://www.zee5.com/images/twitter-social-icon.svg?ver=2.51.89"
                alt=""
            /></a></button
        ></span>
        <div>or</div>
        <form id="form">
          <label for="">Enter Email</label> <br />
          <input type="email" id="sh_email" /> <br />
          <hr />
          <label for="">Password</label> <br />
          <input type="password" id="sh_password" /><br />
          <hr />
          <p>
            <a href="./forgotpassword.html">Forgot Password?</a>
          </p>
          <br />
          <button id="sh_login">Log In</button>
        </form>
        <p>New to ZEE5? <a href="./signup.html">Register</a></p>
      </div>
      <div id="sh_footer"></div>
    </div>
  </body>
</html>
<script type="module">
  //<---------Navbar importing and appending and background fading------->
  import {
    navbar,
    getData,
    appendData,
    main,
    debouncing,
    id,
  } from "./components/navcom.js";

  let navContainer = document.getElementById("sh_navbar");
  navContainer.innerHTML = navbar();

  document.getElementById("search").addEventListener("input", debouncing);

  document.getElementById("search").addEventListener("focus", () => {
    document.getElementById("sh_container").setAttribute("class", "sh_blury");
  });

  document.getElementById("search").addEventListener("focusout", () => {
    document.getElementById("sh_container").setAttribute("class", "");
  });

  //<--------Footer Importing and appending-------->
  import footer from "./components/footer.js";

  let footContainer = document.getElementById("sh_footer");
  footContainer.innerHTML = footer();

  //<------------ Login Functionality ------>

  let userData = JSON.parse(localStorage.getItem("users")) || [];
  let login = localStorage.getItem("login") || "false";

  const form = document.querySelector("form");

  form.addEventListener("submit", (event) => {
    event.preventDefault();

    let email = form.sh_email.value;
    let password = form.sh_password.value;

    let check = userData.filter((el) => {
      return el.email === email && el.password === password;
    });

    if (check.length > 0) {
      login = "true";
      localStorage.setItem("login", login);
      localStorage.setItem("LoggedIn", JSON.stringify(check));
      alert("Login successful!");
      window.location.href = "./index.html";
    } else {
      alert("Wrong credentials");
      form.reset();
    }
  });

  //<----------Changing Color of Login Button-------->
  form.addEventListener("input", () => {
    let email = form.sh_email.value;
    let password = form.sh_password.value;

    if ((email !== "") & (password.length > 5)) {
      document.getElementById("sh_login").style.backgroundColor = "#350c59";
      document.getElementById("sh_login").style.color = "white";
    }
  });
</script>
